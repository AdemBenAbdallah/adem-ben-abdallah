[
  {
    "slug": "blog/handling-asyc-data",
    "title": "Handling Asynchronous Data Fetching in React Beyond the Basics",
    "description": "Handling asynchronous data fetching in React",
    "date": "2024-08-08T00:00:00.000Z",
    "published": true,
    "tags": [
      "react js",
      "react-query"
    ],
    "body": "const{Fragment:l,jsx:n,jsxs:e}=arguments[0];function _createMdxContent(r){const s={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...r.components},{Image:o}=s;return o||function(l,n){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+l+\"` to be defined: you likely forgot to import, pass, or provide it.\")}(\"Image\",!0),e(l,{children:[n(s.p,{children:\"If you've ever fetched data in a React app, you've likely encountered a basic pattern like this:\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",children:e(s.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"id\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"setId\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"1\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"useEffect\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"  fetch\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:\"`https://pokeapi.co/api/v2/pokemon/${\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"id\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"then\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"response\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" response.\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"json\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"())\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"then\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"data\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" setPokemon\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(data))\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"catch\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"error\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" setError\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(error));\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"}, [id]);\"})})]})})}),\"\\n\",n(s.p,{children:\"This code fetches data from the PokemonAPI and displays it.\\nWhile it's great for tutorials, you definitely wouldn’t want to use it in production unless you enjoy debugging at 3 AM.\\nLet’s dive into some common pitfalls and how to avoid them.\"}),\"\\n\",n(s.h2,{id:\"1-handling-loading-and-error-states\",children:n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#1-handling-loading-and-error-states\",children:n(s.strong,{children:\"1. Handling Loading and Error States\"})})}),\"\\n\",n(s.p,{children:\"The initial example doesn’t handle loading and error states,\\nleading to two major UX issues: cumulative layout shift and an infinite spinner.\\nTo address this, you should manage these states explicitly:\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",children:e(s.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"id\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"setId\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"1\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"pokemon\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"setPokemon\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"null\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"loading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"setLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"error\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"setError\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"null\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"useEffect\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"  setLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"true\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"  fetch\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:\"`https://pokeapi.co/api/v2/pokemon/${\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"id\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"then\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"response\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" response.\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"json\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"())\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"then\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"data\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"      setPokemon\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(data);\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"      setLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"    })\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"catch\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"error\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"      setError\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(error);\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"      setLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"}, [id]);\"})})]})})}),\"\\n\",n(s.p,{children:\"This approach ensures you can display appropriate feedback to the user while data is being fetched.\"}),\"\\n\",n(s.h2,{id:\"2-avoiding-race-conditions\",children:n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#2-avoiding-race-conditions\",children:n(s.strong,{children:\"2. Avoiding Race Conditions\"})})}),\"\\n\",n(s.p,{children:\"A more subtle issue arises with multiple asynchronous requests.\\nLet's take an example where you have Pokémon data to display.\\nYou have a button that, when clicked, changes the ID of the Pokemon\"}),\"\\n\",e(\"figure\",{children:[n(o,{src:\"/blog/race_cond1.png\",alt:\"race condition 1\"}),n(\"figcaption\",{children:e(s.p,{children:[\"Here, the \",n(s.code,{children:\"id\"}),\" state is set to 1 when you click the button.\"]})})]}),\"\\n\",e(s.p,{children:[\"You still haven't received the data from the first request, but you click the button\\nagain, changing the \",n(s.code,{children:\"id\"}),\" to 2.\"]}),\"\\n\",e(\"figure\",{children:[n(o,{src:\"/blog/race_cond2.png\",alt:\"race condition 2\"}),n(\"figcaption\",{children:e(s.p,{children:[\"Here, the \",n(s.code,{children:\"id\"}),\" state is set to 2 when you click the button.\"]})})]}),\"\\n\",n(s.p,{children:\"Your state with the pokemonId will be out of sync with the fetch call if the fetch\\nfor ID 1 returns after the fetch for ID 2 due to happenstance.\"}),\"\\n\",e(\"figure\",{children:[n(o,{src:\"/blog/race_cond3.png\",alt:\"race condition 3\"}),e(\"figcaption\",{children:[\"The data for \",n(s.code,{children:\"id\"}),\" 2 returns first.\"]})]}),\"\\n\",e(\"figure\",{children:[n(o,{src:\"/blog/race_cond4.png\",alt:\"race condition 4\"}),e(\"figcaption\",{children:[\"The data for \",n(s.code,{children:\"id\"}),\" 1 returns second.\"]})]}),\"\\n\",e(s.p,{children:[\"This race condition can cause the UI to display incorrect data, as the state\\nmight not reflect the latest requested \",n(s.code,{children:\"id\"}),\".\"]}),\"\\n\",n(s.p,{children:\"If the user clicks a button or triggers a change that results in a new fetch,\\nyou could end up with race conditions this is how you can fix that:\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",children:e(s.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"useEffect\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  let\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" isMounted \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" true\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"  setLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"true\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"  fetch\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:\"`https://pokeapi.co/api/v2/pokemon/${\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"id\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"then\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"response\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" response.\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"json\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"())\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"then\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"data\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"      if\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (isMounted) {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"        setPokemon\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(data);\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"      setLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"    })\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"catch\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"error\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"      if\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (isMounted) {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"        setError\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(error);\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"      setLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  return\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    isMounted \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"}, [id]);\"})})]})})}),\"\\n\",n(s.p,{children:\"By using a isMounted flag, you can ignore responses from outdated requests.\"}),\"\\n\",n(s.h2,{id:\"3-abstracting-data-fetching-logic\",children:n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#3-abstracting-data-fetching-logic\",children:n(s.strong,{children:\"3. Abstracting Data Fetching Logic\"})})}),\"\\n\",n(s.p,{children:\"If you try to push that code to production, someone will definitely ask, 'Can you just hook it up as a custom hook?' 🪝\\nand you'll finish with code like this:\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",children:e(s.code,{\"data-line-numbers\":\"\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},\"data-line-numbers-max-digits\":\"2\",children:[e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"const\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" usePokemon\"}),n(s.span,{style:{color:\"#F97583\"},children:\" =\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"id\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",\"data-highlighted-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"id\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"setId\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"1\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",\"data-highlighted-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"pokemon\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"setPokemon\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"null\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",\"data-highlighted-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"loading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"setLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"error\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"setError\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"null\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"  useEffect\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"    let\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" isMounted \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" true\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"    setLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"true\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"    fetch\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:\"`https://pokeapi.co/api/v2/pokemon/${\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"id\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"then\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"response\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" response.\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"json\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"())\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"then\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"data\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"        if\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (isMounted) {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"          setPokemon\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(data);\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"        }\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"        setLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"      })\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"catch\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"error\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"        if\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (isMounted) {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"          setError\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(error);\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"        }\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"        setLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"      });\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"    return\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"      isMounted \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"  }, [id]);\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  return\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" { pokemon, loading, error };\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),\"\\n\",n(s.p,{children:\"This hook encapsulates the data fetching logic, making it reusable across different components.\"}),\"\\n\",n(s.h2,{id:\"4-managing-data-duplication-and-state\",children:n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#4-managing-data-duplication-and-state\",children:n(s.strong,{children:\"4. Managing Data Duplication and State\"})})}),\"\\n\",n(s.p,{children:\"Okay, after addressing all the previous issues,\\nyou might realize that another component also needs access to the same endpoint data.\\nIt wouldn't make sense to send another request to the backend just to get the same results.\\nRemember, one of your key responsibilities as a software developer is to\\nreduce unnecessary costs and inefficiencies in your code.\"}),\"\\n\",n(s.p,{children:\"When multiple components fetch the same data, it not only creates redundant requests but can also lead to inconsistencies.\\nTo prevent this, you should create a context to share the data across multiple components. Alternatively,\\nyou could lift the state up to a common parent component or use context to efficiently manage and distribute the data.\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",children:e(s.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"import\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" *\"}),n(s.span,{style:{color:\"#F97583\"},children:\" as\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" React \"}),n(s.span,{style:{color:\"#F97583\"},children:\"from\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:' \"react\"'}),n(s.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"const\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" queryContext\"}),n(s.span,{style:{color:\"#F97583\"},children:\" =\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" React.\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"createContext\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"([{}, () \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {}]);\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"export\"}),n(s.span,{style:{color:\"#F97583\"},children:\" function\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" QueryProvider\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"({ \"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"children\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" }) {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  const\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" tuple\"}),n(s.span,{style:{color:\"#F97583\"},children:\" =\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" React.\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"useState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"({});\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  return\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"queryContext.Provider\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" value\"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"{tuple}>{children}</\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"queryContext.Provider\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"export\"}),n(s.span,{style:{color:\"#F97583\"},children:\" default\"}),n(s.span,{style:{color:\"#F97583\"},children:\" function\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useQuery\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"url\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"state\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"setState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" React.\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"useContext\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(queryContext);\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"  React.\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"useEffect\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"    const\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" update\"}),n(s.span,{style:{color:\"#F97583\"},children:\" =\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"newState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"      setState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"prevState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" ({\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"        ...\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"prevState,\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"        [url]: { \"}),n(s.span,{style:{color:\"#F97583\"},children:\"...\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"prevState[url], \"}),n(s.span,{style:{color:\"#F97583\"},children:\"...\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"newState },\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"      }));\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"    let\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" ignore \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"    const\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" handleFetch\"}),n(s.span,{style:{color:\"#F97583\"},children:\" =\"}),n(s.span,{style:{color:\"#F97583\"},children:\" async\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"      update\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"({ data: \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"null\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", isLoading: \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"true\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", error: \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"null\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"      try\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"        const\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" response\"}),n(s.span,{style:{color:\"#F97583\"},children:\" =\"}),n(s.span,{style:{color:\"#F97583\"},children:\" await\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(url);\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"        if\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (ignore) {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"          return\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"        }\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"        if\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (res.ok \"}),n(s.span,{style:{color:\"#F97583\"},children:\"===\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"          throw\"}),n(s.span,{style:{color:\"#F97583\"},children:\" new\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" Error\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:'\"Network response was not ok\"'}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"        }\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"        const\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" data\"}),n(s.span,{style:{color:\"#F97583\"},children:\" =\"}),n(s.span,{style:{color:\"#F97583\"},children:\" await\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" response.\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"json\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"        update\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"({ data, isLoading: \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", error: \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"null\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"      } \"}),n(s.span,{style:{color:\"#F97583\"},children:\"catch\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"        update\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"({ data: \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"null\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", isLoading: \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"false\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", error });\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"  }, [url]);\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  return\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" state[url] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"||\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" { data: \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"null\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", isLoading: \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"true\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", error: \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"null\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" };\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),\"\\n\",n(s.p,{children:\"Are you still considering handling asynchronous data by yourself?\\nI don't think so. Before trying to solve a problem by myself,\\nI always check if others have already solved it for us,\\nand in most cases, they have. That's where React Query comes in.\"}),\"\\n\",n(s.h2,{id:\"5-leveraging-react-query\",children:n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#5-leveraging-react-query\",children:n(s.strong,{children:\"5. Leveraging React Query\"})})}),\"\\n\",n(s.p,{children:\"To simplify data fetching and state management, consider using React Query. It efficiently handles caching,\\nsynchronization, and state updates. Look at how easy it is to fetch data without worrying about all the previous issues.\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",children:e(s.code,{\"data-line-numbers\":\"\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},\"data-line-numbers-max-digits\":\"2\",children:[e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"import\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" { useQuery } \"}),n(s.span,{style:{color:\"#F97583\"},children:\"from\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:' \"@tanstack/react-query\"'}),n(s.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"const\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" fetchPokemon\"}),n(s.span,{style:{color:\"#F97583\"},children:\" =\"}),n(s.span,{style:{color:\"#F97583\"},children:\" async\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),n(s.span,{style:{color:\"#FFAB70\"},children:\"id\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\") \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  const\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\" res\"}),n(s.span,{style:{color:\"#F97583\"},children:\" =\"}),n(s.span,{style:{color:\"#F97583\"},children:\" await\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:\"`https://pokeapi.co/api/v2/pokemon/${\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"id\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  if\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),n(s.span,{style:{color:\"#F97583\"},children:\"!\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"res.ok) \"}),n(s.span,{style:{color:\"#F97583\"},children:\"throw\"}),n(s.span,{style:{color:\"#F97583\"},children:\" new\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" Error\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:'\"Network response was not ok\"'}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  return\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),n(s.span,{style:{color:\"#B392F0\"},children:\"json\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"const\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" Pokemon\"}),n(s.span,{style:{color:\"#F97583\"},children:\" =\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",\"data-highlighted-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"id\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"setId\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useState\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"1\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  const\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"data\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"isLoading\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", \"}),n(s.span,{style:{color:\"#79B8FF\"},children:\"error\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" useQuery\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E1E4E8\"},children:\"    queryKey: [\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:'\"pokemon\"'}),n(s.span,{style:{color:\"#E1E4E8\"},children:\", id],\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#B392F0\"},children:\"    queryFn\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\": () \"}),n(s.span,{style:{color:\"#F97583\"},children:\"=>\"}),n(s.span,{style:{color:\"#B392F0\"},children:\" fetchPokemon\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\"(id),\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  if\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (isLoading) \"}),n(s.span,{style:{color:\"#F97583\"},children:\"return\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:' \"Loading...\"'}),n(s.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  if\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" (error) \"}),n(s.span,{style:{color:\"#F97583\"},children:\"return\"}),n(s.span,{style:{color:\"#9ECBFF\"},children:' \"An error has occurred: \"'}),n(s.span,{style:{color:\"#F97583\"},children:\" +\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" error.message;\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"  return\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" <\"}),n(s.span,{style:{color:\"#85E89D\"},children:\"div\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\">....</\"}),n(s.span,{style:{color:\"#85E89D\"},children:\"div\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\">;\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#F97583\"},children:\"export\"}),n(s.span,{style:{color:\"#F97583\"},children:\" default\"}),n(s.span,{style:{color:\"#E1E4E8\"},children:\" Pokemon;\"})]})]})})}),\"\\n\",n(s.p,{children:\"React Query abstracts away much of the complexity involved in handling asynchronous data and state, allowing you to focus on building features.\"}),\"\\n\",n(s.h2,{id:\"conclusion\",children:n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#conclusion\",children:n(s.strong,{children:\"Conclusion\"})})}),\"\\n\",n(s.p,{children:\"Managing asynchronous data fetching in React involves more than just calling an API.\\nHandling loading and error states, avoiding race conditions, abstracting logic, managing data duplication,\\nand leveraging tools like React Query are essential for building robust and efficient applications.\\nBy addressing these aspects, you’ll enhance both the reliability and user experience of your React apps.\"})]})}return{default:function(l={}){const{wrapper:e}=l.components||{};return e?n(e,{...l,children:n(_createMdxContent,{...l})}):_createMdxContent(l)}};",
    "slugAsParams": "handling-asyc-data"
  }
]